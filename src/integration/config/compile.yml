---
provides: [caliptra_top]
schema_version: 2.4.0
requires: [libs]
requires:
  - kv_defines_pkg
  - el2_swerv_pkg
  - el2_swerv_wrapper
  - ahb_lite_bus
  - sha512_ctrl
  - sha256_ctrl
  - doe_ctrl
  - hmac_ctrl
  - ecc_top
  - keyvault
  - soc_ifc_top
targets:
  rtl:
    directories: [$COMPILE_ROOT/rtl]
    files:
      - $COMPILE_ROOT/rtl/config_pkg.sv
      - $COMPILE_ROOT/rtl/caliptra_top.sv
      - $COMPILE_ROOT/rtl/caliptra_top_dummy.sv
      - $COMPILE_ROOT/rtl/ahb_sif.sv
    tops: [caliptra_top_dummy]
  rtl_lint:
    waiver_files:
      - $COMPILE_ROOT/config/design_lint/sglint_waivers
    black_box:
      - el2_swerv_wrapper
  cdc:
    tcl_files:
      - $COMPILE_ROOT/config/cdc/integration_top.constraints.tcl
      - $COMPILE_ROOT/config/cdc/integration_top.waivers.tcl
global:
  tool:
    vcs:
      default:
        - '-assert svaext'
        #- '-v2k_generate'
---
  provides: [caliptra_top_tb]
  schema_version: 2.4.0
  requires:
    - el2_swerv_pkg
    - el2_swerv_wrapper
    - caliptra_top
  targets:
    tb:
      directories: [$COMPILE_ROOT/tb]
      files:
        - $COMPILE_ROOT/rtl/config_pkg.sv
        - $COMPILE_ROOT/../riscv_core/swerv_el2/rtl/include/el2_def.sv
        - $COMPILE_ROOT/../riscv_core/swerv_el2/rtl/el2_pdef.vh
        - $COMPILE_ROOT/tb/caliptra_swerv_sram_export.sv
        - $COMPILE_ROOT/tb/caliptra_top_tb.sv
      tops: [caliptra_top_tb]
    sim:
      pre_exec: $TOOLS/scripts/run_test_makefile
  global:
    tool:
      vcs:
        default:
          - '-assert svaext'
          #- '-v2k_generate'
          #- '-timescale=1ns/1ps'
          - '-noinherit_timescale=1ns/1ps'
          #- '-ucli -i dump.ucli'
        #sim:
          #- '-ucli -i dump.ucli'

