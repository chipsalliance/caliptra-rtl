# Copyright (C) Microsoft Corporation. All rights reserved.

# Go here for details on compile.yml syntax:
# https://dev.azure.com/ms-tsd/Ether/_git/sim-tools?path=%2FSourceFileSpec.docx&version=GBmaster

---
provides: [rust_top]
schema_version: 2.4.0
requires:
  - el2_swerv_pkg
  - el2_swerv_wrapper
  - ahb_node_wrap
  - sha512_ctrl
  - mbox
targets:
  rtl:
    directories: [$COMPILE_ROOT/rtl]
    files:
      - $COMPILE_ROOT/rtl/rust_top.sv
      - $COMPILE_ROOT/rtl/ahb_sif.sv 
    tops: [rust_top]
  rtl_lint:
    waiver_files:
      - $COMPILE_ROOT/config/design_lint/integration_lint.waivers
  cdc:
    tcl_files:
      - $COMPILE_ROOT/config/cdc/integration_top.constraints.tcl
      - $COMPILE_ROOT/config/cdc/integration_top.waivers.tcl
global:
  tool:
    vcs:
      default:
        - '-assert svaext'
        - '-v2k_generate'
---
  provides: [rust_top_tb]
  schema_version: 2.4.0
  requires:
    - el2_swerv_pkg
    - rust_top
  targets:
    tb:
      directories: [$COMPILE_ROOT/tb]
      files:
        - $COMPILE_ROOT/rtl/cfg.sv
        - $COMPILE_ROOT/tb/rust_top_tb.sv
      tops: [rust_top_tb]
    sim:
      pre_exec: $TOOLS/scripts/run_test_makefile
  global:
    tool:
      vcs:
        default:
          - '-assert svaext'
          - '-v2k_generate'
          - '-timescale=1ns/1ps'
          - '-noinherit_timescale=1ns/1ps'
          - '-ucli -i dump.ucli'
        sim:
          - '-ucli -i dump.ucli'

  
